{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '49618803-936837fbab6b031520c07bf29';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page = 1) {\n    const perPage = 15;\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`;\n\n    try {\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(`Помилка HTTP: ${response.status}`);\n        }\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.error('Помилка при отриманні зображень:', error);\n        throw error;\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags }) => `\n        <a href=\"${largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n    `).join('');\n\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add('hidden');\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentQuery = '';\nlet currentPage = 1;\nconst perPage = 15;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (searchForm) {\n        searchForm.addEventListener('submit', onSearchSubmit);\n    } else {\n        console.error('.search-form не знайдений');\n    }\n\n    if (loadMoreBtn) {\n        loadMoreBtn.addEventListener('click', onLoadMoreClick);\n    } else {\n        console.error('.load-more не знайдений');\n    }\n});\n\nasync function onSearchSubmit(event) {\n    event.preventDefault();\n    clearGallery();\n    hideLoadMoreButton();\n\n    const searchQuery = event.currentTarget.elements.searchQuery;\n    if (!searchQuery || !searchQuery.value.trim()) {\n        iziToast.warning({\n            title: 'Увага',\n            message: 'Будь ласка, введіть пошуковий запит.',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    currentQuery = searchQuery.value.trim();\n    currentPage = 1;\n    await fetchImages();\n}\n\nasync function onLoadMoreClick() {\n    currentPage += 1;\n    await fetchImages();\n}\n\nasync function fetchImages() {\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        if (!data || !data.hits || data.hits.length === 0) {\n            iziToast.info({\n                title: 'Інформація',\n                message: 'На жаль, за вашим запитом нічого не знайдено.',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        const totalPages = Math.ceil(data.totalHits / perPage);\n        if (currentPage >= totalPages) {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: 'Кінець результатів',\n                message: 'Ви досягли кінця результатів пошуку.',\n                position: 'topRight',\n            });\n        } else {\n            showLoadMoreButton();\n        }\n\n        const galleryItem = document.querySelector('.gallery-item');\n        if (galleryItem) {\n            const { height: cardHeight } = galleryItem.getBoundingClientRect();\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth',\n            });\n        }\n    } catch (error) {\n        console.error('Помилка під час отримання даних: ', error);\n        iziToast.error({\n            title: 'Помилка',\n            message: 'Сталася помилка при завантаженні зображень. Спробуйте ще раз.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","url","response","error","galleryContainer","loadMoreBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","searchForm","currentQuery","currentPage","perPage","onSearchSubmit","onLoadMoreClick","event","searchQuery","iziToast","fetchImages","data","totalPages","galleryItem","cardHeight"],"mappings":"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"}